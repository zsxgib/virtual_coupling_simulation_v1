# Part B 核心图表详细描述

> ⚠️ **重要提示**：以下所有具体数据値均为**预估**，待仿真完成后需更新为实际数据。
>
> ---
>
> ## 仿真数据提取清单（所有需要的数据项）
>
> ### 1. 仿真参数
> | 参数 | 符号 | 仿真中使用 | 备注 |
> |------|------|-----------|------|
> | 智能体数量 | N | 8 | 列车数 |
> | 状态维度 | n | 2 | [p, v] |
> | 控制维度 | m | 2 | |
> | 目标间距 | d_desired | 500 | m |
> | 仿真时长 | T_end | 10 | s |
> | 采样步长 | dt | 0.005 | s |
> | 拓扑类型 | - | chain | 链式 |
> | 阈值上界 | σ_max | 1.0 | |
> | 阈值下界 | σ_min | 0.1 | |
> | Q权重 | Q | 3×10^7 | |
> | R权重 | R | 1.0 | |
>
> ### 2. 系统真实参数
> | 参数 | 符号 | 值 | 来源 |
> |------|------|-----|------|
> | 系统矩阵A | A | ? | 需从仿真提取 |
> | 输入矩阵B | B | ? | 需从仿真提取 |
> | 反馈增益K | K | ? | Riccati解 |
>
> ### 3. 初始条件
> | 智能体 | 初始位置 p_i(0) | 初始速度 v_i(0) |
> |--------|-----------------|-----------------|
> | T1 | (N-1)×d_desired + U(-100, 100) m | v0 + U(-5, 5) m/s |
> | T2 | (N-2)×d_desired + U(-100, 100) m | v0 + U(-5, 5) m/s |
> | T3 | (N-3)×d_desired + U(-100, 100) m | v0 + U(-5, 5) m/s |
> | T4 | (N-4)×d_desired + U(-100, 100) m | v0 + U(-5, 5) m/s |
> | T5 | (N-5)×d_desired + U(-100, 100) m | v0 + U(-5, 5) m/s |
> | T6 | (N-6)×d_desired + U(-100, 100) m | v0 + U(-5, 5) m/s |
> | T7 | (N-7)×d_desired + U(-100, 100) m | v0 + U(-5, 5) m/s |
> | T8 | (N-8)×d_desired + U(-100, 100) m | v0 + U(-5, 5) m/s |
>
> 其中：d_desired = 500 m, v0 = 22.22 m/s (80 km/h), U(-a, a) 为均匀分布噪声
>
> ### 4. 每车每时刻数据（采样输出）
> - 状态: x_i(t) = [p_i(t), v_i(t)]
> - 估计状态: x̂_i(t)
> - 测量误差: e_i(t) = x̂_i(t) - x_i(t)
> - 相对误差: δ_i(t)
> - 阈值: σ_i(t)
> - 控制输入: u_i(t)
> - 触发标志: triggered_i(t)
>
> ---
> **备注**：以下每个图的数据都应从上述仿真数据中提取

---

## Fig.1 拓扑与相轨迹 (2×1)

### 子图 (a) 链式拓扑结构图

**用途**：展示8列车虚拟重联场景的通信拓扑

**画布尺寸**：宽度 8cm 或 3.5 英寸

**视觉元素**：

```
←─────────────────────────────────────────────────────────────────────→
│                                                                     │
│                    (a) Chain Topology for 8-Train Platoon           │
│                                                                     │
│   T1        T2        T3        T4        T5        T6        T7        T8   │
│  ┌───┐    ┌───┐    ┌───┐    ┌───┐    ┌───┐    ┌───┐    ┌───┐    ┌───┐     │
│  │   │    │   │    │   │    │   │    │   │    │   │    │   │    │   │     │
│  └───┘    └───┘    └───┘    └───┘    └───┘    └───┘    └───┘    └───┘     │
│   ↑        ↑        ↑        ↑        ↑        ↑        ↑        ↑            │
│   │        │        │        │        │        │        │        │            │
│   0       500     1000     1500     2000     2500     3000     3500  (m)  │
│                                                                     │
│  ←─────→  ←─────→  ←─────→  ←─────→  ←─────→  ←─────→  ←─────→           │
│   d=500m   d=500m   d=500m   d=500m   d=500m   d=500m   d=500m            │
│                                                                     │
│  ←─────→  ←─────→  ←─────→  ←─────→  ←─────→  ←─────→  ←─────→           │
│   ⇆        ⇆        ⇆        ⇆        ⇆        ⇆        ⇆                  │
│   C         C        C        C        C        C        C                  │
│  (communication)                                                       │
│                                                                     │
│   Each train communicates only with its leader and follower          │
│                                                                     │
└─────────────────────────────────────────────────────────────────────→
```

**详细说明**：

1. **列车矩形框**
   - 数量：8个
   - 样式：矩形，实线边框
   - 边框颜色：黑色
   - 边框宽度：1 pt
   - 填充色：浅灰色 (RGB: 240, 240, 240)
   - 宽度：0.8 cm
   - 高度：0.4 cm
   - 间距：相等

2. **列车编号**
   - 位置：每个矩形上方
   - 字体：Times New Roman, 10pt
   - 内容：T1, T2, ..., T8

3. **位置刻度**
   - 位置：列车下方
   - 字体：Times New Roman, 9pt
   - 刻度值：0, 500, 1000, 1500, 2000, 2500, 3000, 3500
   - 单位：m (米)

4. **间距标注 (绿色)**
   - 样式：双向箭头
   - 箭头颜色：绿色 (RGB: 0, 150, 0)
   - 箭头粗细：1.5 pt
   - 标注位置：箭头中间
   - 标注内容："d = 500 m"
   - 标注字体：Times New Roman, 9pt

5. **通信连线 (蓝色)**
   - 样式：双向箭头
   - 箭头颜色：蓝色 (RGB: 0, 0, 200)
   - 箭头粗细：1.5 pt
   - 标注位置：箭头中间或下方
   - 标注内容："C" 或 "Communication"
   - 标注字体：Times New Roman, 8pt

6. **标题**
   - 位置：图上方居中
   - 内容："(a) Chain Topology for 8-Train Platoon"
   - 字体：Times New Roman, 11pt, 加粗

7. **脚注**
   - 位置：图下方
   - 内容："Each train communicates only with its leader and follower"
   - 字体：Times New Roman, 9pt, 斜体

**学术意义**：
- 展示链式拓扑结构 G = (V, E)，|V| = 8, |E| = 7
- 说明分布式通信：每车只与相邻车交换状态
- 引用：对应论文 Section V-B 的虚拟重联场景

---

### 子图 (b) 相平面轨迹

**用途**：展示8列车状态收敛到稳态的过程，验证控制目标达成

**画布尺寸**：宽度 8cm 或 3.5 英寸

**坐标轴**：

| 轴 | 标签 | 范围 | 刻度 |
|----|------|------|------|
| X轴 | Position p (m) | [0, 4000] | 每500m |
| Y轴 | Velocity v (m/s) | [18, 26] | 每2 m/s |

**视觉元素**：

1. **轨迹线**
   - 数量：8条
   - 样式：实线
   - 线宽：1.5 pt
   - 颜色方案（8种）：
     | 列车 | 颜色 | RGB |
     |------|------|-----|
     | T1 | 蓝色 | (0, 0, 200) |
     | T2 | 红色 | (200, 0, 0) |
     | T3 | 绿色 | (0, 150, 0) |
     | T4 | 橙色 | (220, 120, 0) |
     | T5 | 紫色 | (140, 0, 140) |
     | T6 | 棕色 | (120, 80, 40) |
     | T7 | 粉色 | (200, 100, 150) |
     | T8 | 青色 | (0, 150, 150) |

   **学术分析（8条线的物理含义）**：

   | 列车 | 初始位置 | 初始速度 | 轨迹特征 | 收敛特性 |
   |------|----------|----------|----------|----------|
   | T1 | 最前 p≈3500m | 较高 v≈25 | 减速为主 | 减速→匀速 |
   | T2 | p≈3000m | 中等 v≈22 | 跟随T1 | 加速→匀速 |
   | T3 | p≈2500m | 中等 v≈20 | 跟随T2 | 加速→匀速 |
   | T4 | p≈2000m | 中等 v≈23 | 跟随T3 | 加速→匀速 |
   | T5 | p≈1500m | 中等 v≈21 | 跟随T4 | 加速→匀速 |
   | T6 | p≈1000m | 中等 v≈24 | 跟随T5 | 加速→匀速 |
   | T7 | p≈500m | 较低 v≈19 | 跟随T6 | 加速→匀速 |
   | T8 | 最后 p≈0m | 较低 v≈18 | 加速为主 | 加速→匀速 |

   **轨迹形态学分析**：

   - **头车 (T1)**：位于最前方，初始速度较高，需要减速跟踪参考轨迹
     - 轨迹方向：从右上向左下
     - 终点：收敛到 v=22.22 m/s

   - **跟随车 (T2-T7)**：根据前车位置调整自身状态
     - 轨迹形态：前期加速/减速，后期趋于水平
     - 收敛特性：所有轨迹趋于同一终点

   - **尾车 (T8)**：位于最后方，初始速度最低，需要加速追赶
     - 轨迹方向：从左下向右上
     - 终点：收敛到 v=22.22 m/s

   **关键收敛特征**：

   | 特征 | 描述 | 学术含义 |
   |------|------|----------|
   | 收敛终点 | 所有8条线汇聚到一点 (p*, v*) | 共识达成 Consensus |
   | 速度收敛 | v → 22.22 m/s (80 km/h) | 速度一致性 |
   | 间距收敛 | p_{i-1} - p_i → 500 m | 车间距一致性 |
   | 轨迹平滑 | 无振荡，无超调 | 系统稳定 |
   | 收敛时间 | t < 5 s | 瞬态性能良好 |

2. **起点标记**
   - 样式：实心圆点 (●)
   - 大小：6 pt
   - 颜色：蓝色 (RGB: 0, 0, 200)
   - 位置：每条轨迹的起始点

3. **终点标记**
   - 样式：五角星 (★)
   - 大小：8 pt
   - 颜色：红色 (RGB: 200, 0, 0)
   - 位置：所有轨迹收敛到的共同终点

4. **参考线**
   - 样式：水平虚线
   - 位置：v = 22.22 m/s (80 km/h)
   - 颜色：灰色 (RGB: 128, 128, 128)
   - 线宽：1 pt
   - 标注："v = 22.22 m/s"

5. **网格线**
   - 主网格：灰色，0.5 pt
   - 次网格：浅灰，0.25 pt

6. **图例**
   - 位置：右上角或右下角
   - 内容：Train 1 ~ Train 8（带颜色对应）
   - 字体：Times New Roman, 9pt

7. **坐标轴标签**
   - X轴标签："Position p (m)"
   - Y轴标签："Velocity v (m/s)"
   - 字体：Times New Roman, 10pt

8. **标题**
   - 位置：图上方居中
   - 内容："(b) Phase Plane Trajectories"
   - 字体：Times New Roman, 11pt, 加粗

**数据特征（未做仿真，预估）**：

> ⚠️ **需从仿真获取的数据项**：
> - 8辆列车在 t=0, 2, 5, 10s 时的位置坐标 p_i(t)
> - 8辆列车在 t=0, 2, 5, 10s 时的速度坐标 v_i(t)
> - 收敛终点坐标 (p*, v*)
> - 收敛时间 t_converge

| 时刻 | 位置范围 | 速度范围 | 特征 |
|------|----------|----------|------|
| t=0 | 0-3500m | 18-26 m/s | 8个起点分散 |
| t=2 | 1000-3000m | 20-24 m/s | 开始收敛 |
| t=5 | 1500-2500m | 21.5-23 m/s | 明显收敛 |
| t=10 | 1800-2200m | 22 m/s | 收敛到稳态 |

**ASCII示意图**：

```
v (m/s)
 26 ┤
    │              ★ (收敛点)
 24 ┤         ╱
    │       ╱   ● ──● ──● ──●
 22 ┤──────●────────────────────── v=22.22
    │   ╱
 20 ┤ ╱
    │●
 18 ┤●
    └───────────────────────────────── p (m)
      0   1000  2000  3000  4000

    ● : 起点 (t=0)
    ★ : 终点 (t→∞)
    ─ : 轨迹线
```

**学术意义**：
- 验证控制目标达成：所有列车收敛到相同速度 v* = 22.22 m/s
- 验证间距收敛：位置间距收敛到固定编队形态 (p_{i-1} - p_i → 500 m)
- 相轨迹终点在相平面上表现为：所有轨迹终点落在 v = 22.22 m/s 的水平线上，且 P 轴上等距分布（不是汇聚到同一点！）
- 相轨迹平滑无振荡，说明系统稳定
- 对应论文 Fig. 9(b) 和 Theorem 1

---

## Fig.2 相对误差对比

**用途**：对比5种触发方案的控制精度，展示自适应阈值方案的优势

**画布尺寸**：宽度 8cm 或 3.5 英寸

**坐标轴**：

| 轴 | 标签 | 范围 | 刻度 |
|----|------|------|------|
| X轴 | Time t (s) | [0, 10] | 每2s |
| Y轴 | Mean Relative Error \|\|δ\|\|_mean | [10^-3, 10^2] | 对数坐标 |
> ⚠️ **数据处理注意**：对数坐标无法处理0值。仿真时若误差收敛到0，需添加极小常数 eps=10^-6，或在绘图时截断到10^-4~10^-5。

**5条曲线**：

| 方案 | 名称 | 颜色 | RGB | 线型 | 线宽 |
|------|------|------|-----|------|------|
| A | Periodic | 蓝色 | (0, 0, 200) | 实线 | 1.5 pt |
| B | Fixed (σ=0.3) | 橙色 | (220, 120, 0) | 虚线 | 1.5 pt |
| C | Error-Driven | 绿色 | (0, 150, 0) | 点线 | 1.5 pt |
| D | State-Driven | 红色 | (200, 0, 0) | 点划线 | 1.5 pt |
| E | Lyapunov-Driven | 紫色 | (140, 0, 140) | 实线 | 1.5 pt |

**数据特征（未做仿真，预估）**：

>需从仿真获取 ⚠️ **的数据项**：
> - 5条曲线在 t=0, 0.5, 1, 2, 5, 10s 时的 ||δ||_mean 值
> - 各方案的稳态误差值 ||δ||_steady
> - 各方案的收敛时间 t_converge（达到阈值0.01的时间）

| 时间 | A | B | C | D | E | 特征 |
|------|-----|-----|-----|-----|-----|------|
| 0s | 150 | 150 | 150 | 150 | 150 | 初始误差 |
| 0.5s | 80 | 60 | 50 | 55 | 70 | 快速下降 |
| 1s | 40 | 30 | 15 | 20 | 25 | 继续下降 |
| 2s | 20 | 10 | 3 | 5 | 8 | 明显差异 |
| 5s | 15 | 3 | 0.5 | 0.8 | 1.5 | 自适应优 |
| 10s | 12 | 1 | 0.05 | 0.08 | 0.2 | 收敛完成 |

**曲线特征分析**：

| 方案 | 瞬态行为 | 稳态性能 | 收敛速度 | 振荡 |
|------|----------|----------|----------|------|
| A | 快速下降后周期性波动 | 12左右 | 快但不稳 | 有 |
| B | 持续下降 | ~1 | 中等 | 无 |
| C | 快速下降 | <0.1 | 最快 | 无 |
| D | 快速下降 | <0.1 | 快 | 无 |
| E | 平稳下降 | ~0.2 | 中等 | 无 |

**辅助元素**：

1. **收敛阈值线**
   - 样式：水平虚线
   - 位置：||δ|| = 0.01
   - 颜色：黑色
   - 线宽：1 pt
   - 标注："Convergence threshold"

2. **网格线**
   - 主网格：对数坐标主刻度线
   - 颜色：灰色，0.5 pt

3. **图例**
   - 位置：右上角
   - 内容：5个条目
   - 字体：Times New Roman, 9pt

4. **坐标轴标签**
   - X轴："Time t (s)"
   - Y轴："Mean Relative Error ||δ||_mean"
   - 字体：Times New Roman, 10pt

5. **标题**
   - 位置：图上方居中
   - 内容："Comparison of Relative State Error"
   - 字体：Times New Roman, 11pt, 加粗

**ASCII示意图**：

```
||δ||_mean
  10^2 ┤ A ─── B ───
       │
  10^1 ┤
       │   C ───
  10^0 ┤     D ─── E ──
       │
  10^-1 ┤        ──────── threshold
       │
  10^-2 ┤ C,D,E → 0
       │
  10^-3 ┤
       └────────────────── t (s)
         0   2   4   6   8   10
```

**学术分析**：

1. **自适应方案 vs 固定阈值**：
   - C、D、E在t=5s后远优于B
   - 自适应阈值根据系统状态调整，更有效

2. **三种自适应方案对比**：
   - C (Error-Driven)：收敛最快，适合需要快速响应的场景
   - D (State-Driven)：性能居中，参数直观
   - E (Lyapunov-Driven)：最保守，但稳定性保证最强

3. **Periodic方案问题**：
   - A在稳态时有周期性波动
   - 这是因为固定间隔通信无法适应系统状态变化

4. **收敛性验证**：
   - C、D、E在10s内收敛到0.01以下
   - 验证Theorem 1: δ → 0

**学术意义**：
- 证明自适应阈值方案的控制精度不低于固定阈值
- 展示不同自适应策略的瞬态性能差异
- 对应论文 Table V 的 Steady Error 列

## Fig.3 触发事件分布

**用途**：展示各方案的触发时刻分布，直观体现通信稀疏性，验证Zeno-free

**画布尺寸**：宽度 12cm 或 5 英寸

**布局**：5行时间轴（对应5种方案）

**坐标轴**：

| 轴 | 标签 | 范围 |
|----|------|------|
| X轴 | Time t (s) | [0, 10] |
| Y轴 | Scheme | A, B, C, D, E |

**视觉元素**：

1. **触发点**
   - 样式：黑色圆点 (●)
   - 大小：4 pt
   - 位置：触发时刻对应的X轴位置

2. **5行时间轴布局（未做仿真，预估）**：

> ⚠️ **需从仿真获取的数据项**：
> - 每个方案中每辆列车(T1-T8)在 t=0-10s 内的所有触发时刻 t_trigger
> - 各方案的总触发次数 N_trigger
> - 各方案的触发间隔列表 Δt = t_k+1 - t_k
> - 最小触发间隔 t_min = min(Δt)
> - 各时间段(0-1s, 1-3s, 3-10s)的触发次数

| 行号 | 方案 | 触发次数 | 触发特征 |
|------|------|----------|----------|
| 1 | A (Periodic) | 80 | 均匀分布，每1s一个点 |
| 2 | B (Fixed) | 142 | 0-3s密集，之后减少 |
| 3 | C (Error-Driven) | 18 | 0-1s几次触发后极少 |
| 4 | D (State-Driven) | 24 | 0-2s密集，之后减少 |
| 5 | E (Lyapunov) | 89 | 全程相对均匀 |

**各方案触发分布特征**：

| 方案 | t=0-1s | t=1-3s | t=3-10s | 分布特征 |
|------|---------|---------|----------|----------|
| A | 10 | 20 | 50 | 完全均匀 |
| B | ~50 | ~50 | ~42 | 前期密集 |
| C | ~10 | ~5 | ~3 | 快速收敛 |
| D | ~10 | ~8 | ~6 | 逐渐减少 |
| E | ~15 | ~30 | ~44 | 相对均匀 |

**辅助元素**：

1. **方案标签**
   - 位置：每行左侧
   - 内容：(A) Periodic, (B) Fixed, (C) Error-Driven, (D) State-Driven, (E) Lyapunov-Driven
   - 字体：Times New Roman, 9pt

2. **触发次数标注**
   - 位置：每行右侧或图例
   - 内容：每种方案的总触发次数

3. **垂直参考线（可选）**
   - t = 1, 2, 3, ..., 9
   - 样式：灰色虚线，0.5 pt

4. **网格线**
   - 水平主刻度线：每1s

5. **坐标轴标签**
   - X轴："Time t (s)"
   - 字体：Times New Roman, 10pt

6. **标题**
   - 位置：图上方居中
   - 内容："Triggering Events Distribution"
   - 字体：Times New Roman, 11pt, 加粗

**ASCII示意图**：

```
         0    1    2    3    4    5    6    7    8    9   10 (s)
(A)      ●────●────●────●────●────●────●────●────●────●  (80次)
(B)      ●●●●●●●●●●●●●●  ●●●●  ●●●●  ●●●●●●  ●●●●  (142次)
(C)      ●●●●       ●          ●       ●                  (18次)
(D)      ●●●●●●●●   ●●●●   ●●●    ●●     ●●         (24次)
(E)      ●●●  ●●  ●●  ●●  ●●  ●●  ●●  ●●  ●●  ●●  (89次)
```

**学术分析**：

1. **通信效率可视化**：
   - 点越稀疏 = 触发越少 = 通信越节省
   - C方案点最稀疏，通信最少

2. **Zeno行为验证**：
   - 所有方案的触发点之间有间隙
   - 最小间隔 > 10ms
   - 验证Theorem 3: Zeno-free

3. **自适应机制分析**：
   - C、D在初期触发后，后期触发显著减少
   - 这是因为σ自适应降低，减少了不必要的通信
   - E相对均匀，说明Lyapunov驱动较为保守

4. **Periodic vs 事件触发**：
   - A完全均匀，是时间驱动
   - B-E是事件驱动，触发取决于系统状态

**学术意义**：
- 核心贡献图：展示事件触发机制的有效性
- 直观展示自适应阈值如何减少通信
- 验证Theorem 3: 最小触发间隔 > 0

## Fig.4 阈值演化与参数估计

**用途**：展示自适应阈值σ的动态调整过程，以及参数估计Â和B̂的收敛性

**画布尺寸**：宽度 12cm 或 5 英寸

**布局**：2×1 子图

---

### 子图 (a) 自适应阈值 σ 演化

**坐标轴**：

| 轴 | 标签 | 范围 |
|----|------|------|
| X轴 | Time t (s) | [0, 10] |
| Y轴 | Threshold σ | [0, 1.2] |

**3条曲线**：

| 方案 | 名称 | 颜色 | RGB | 线型 |
|------|------|------|-----|------|
| C | Error-Driven | 绿色 | (0, 150, 0) | 实线 |
| D | State-Driven | 红色 | (200, 0, 0) | 虚线 |
| E | Lyapunov-Driven | 紫色 | (140, 0, 140) | 点划线 |

**数据特征（未做仿真，预估）**：

> ⚠️ **需从仿真获取的数据项**：
> - C/D/E三种方案在 t=0, 1, 2, 3, 5, 10s 时的σ值
> - σ(t)曲线的完整时间序列
> - σ达到σ_min的时间 t_sigma_min

| 时间 | C | D | E | 特征 |
|------|------|------|------|------|
| 0s | 1.0 | 1.0 | 1.0 | 初始σ_max |
| 1s | 0.3 | 0.6 | 0.8 | C快速下降 |
| 2s | 0.15 | 0.4 | 0.6 | D跟随δ变化 |
| 3s | 0.1 | 0.25 | 0.45 | E缓慢下降 |
| 5s | 0.1 | 0.15 | 0.3 | 趋近σ_min |
| 10s | 0.1 | 0.1 | 0.1 | 达到σ_min |

**曲线特征分析**：

| 方案 | 下降速度 | 波动性 | 与δ的关系 | 保守程度 |
|------|----------|---------|----------|----------|
| C | 最快 | 有波动 | 响应||e||变化 | 最激进 |
| D | 中等 | 较平滑 | 反比于||δ|| | 中等 |
| E | 最慢 | 最平滑 | 与||δ||²成正比 | 最保守 |

**辅助元素**：

1. **边界线**
   - σ_max = 1.0：水平实线，黑色
   - σ_min = 0.1：水平实线，黑色
   - 标注在右侧

2. **网格线**
   - 主网格：对数/线性主刻度

3. **图例**
   - 位置：右上角
   - 内容：3个条目

4. **子图标题**
   - 内容："(a) Adaptive Threshold Evolution"
   - 字体：Times New Roman, 10pt

---

### 子图 (b) 参数估计收敛

**坐标轴**：

| 轴 | 标签 | 范围 |
|----|------|------|
| X轴 | Time t (s) | [0, 10] |
| Y轴 | Estimation Error | [10^-4, 10] (对数) |

**2条曲线**：

| 曲线 | 内容 | 颜色 | RGB | 线型 |
|------|------|------|-----|------|
| 1 | \|\|Â_1 - A\|\| | 蓝色 | (0, 0, 200) | 实线 |
| 2 | \|\|B̂_1 - B\|\| | 橙色 | (220, 120, 0) | 虚线 |

**数据特征（未做仿真，预估）**：

> ⚠️ **需从仿真获取的数据项**：
> - Train 1 的 Â_1(t) 矩阵时间序列
> - Train 1 的 B̂_1(t) 矩阵时间序列
> - 真实系统矩阵 A 和 B
> - ||Â_1(t) - A|| 和 ||B̂_1(t) - B|| 在 t=0,1,2,5,10s 的值
> - 参数收敛到 0.1 和 0.01 的时间

| 时间 |\|\|Â-A\|\| | \|\|B̂-B\|\| | 特征 |
|------|-------------|---------------|------|
| 0s | 0.5 | 0.5 | 随机初始 |
| 1s | 0.2 | 0.3 | 快速下降 |
| 2s | 0.08 | 0.15 | 继续收敛 |
| 5s | 0.02 | 0.05 | 接近真值 |
| 10s | 0.005 | 0.01 | 收敛完成 |

**收敛特征**：

- Â比B̂收敛更快
- 最终收敛到 < 0.01
- 对数坐标展示全过程

**辅助元素**：

1. **收敛阈值线**
   - ||·|| = 0.1：水平虚线
   - ||·|| = 0.01：水平虚线

2. **网格线**
   - 对数坐标主刻度

3. **图例**
   - 位置：右上角

4. **子图标题**
   - 内容："(b) Parameter Estimation Convergence (Train 1)"

**ASCII示意图**：

```
σ      (a) Threshold Evolution
 1.0 ┤ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ σ_max
     │ C ─ ─
 0.8 ┤       E ─ ─
     │   D ─ ─
 0.6 ┤
     │
 0.4 ┤
     │
 0.2 ┤
     │              ─ ─ ─ ─ ─ σ_min
 0.0 ┼────────────────────────── t(s)
       0   2   4   6   8   10

     (b) Parameter Estimation Error
||·||  │
 10⁰ ┤
     │
 10⁻¹ ┤ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─
     │    ╱
 10⁻² ┤ ─ ╱ ─ ─ ─
     │  ╱
 10⁻³ ┤╱
     │   Â   B̂
 10⁻⁴ ┼────────────────────── t(s)
       0   2   4   6   8   10
```

**学术分析**：

1. **阈值自适应机制**：
   - σ从σ_max下降到σ_min
   - 下降速度与方案设计一致
   - 验证自适应律的有效性

2. **参数估计收敛**：
   - Â和B̂都收敛到真实值
   - 证明分布式自适应估计有效
   - 验证Theorem 2: 参数有界

3. **三种自适应策略对比**：
   - C最快但最激进
   - E最慢但最稳定
   - D居中

**学术意义**：
- 验证Section III的自适应律设计
- 展示参数估计的收敛性
- 对应论文 Fig. 11, Fig. 12

## Fig.5 通信量对比

**用途**：量化展示5种方案的通信效率，是论文的核心贡献图

**画布尺寸**：宽度 8cm 或 3.5 英寸

**坐标轴**：

| 轴 | 标签 | 范围 |
|----|------|------|
| X轴 | Scheme | A, B, C, D, E |
| Y轴 | Communication Count | [0, 160] |

**柱状图（未做仿真，预估）**：

> ⚠️ **需从仿真获取的数据项**：
> - A/B/C/D/E 五种方案的总触发次数 N_trigger
> - 通信率 = N_trigger / (N × T_end / dt)
> - 各方案的稳态误差 ||δ||_steady
> - 相对B方案的通信减少比例

| 方案 | 名称 | 柱高 | 填充色 | RGB | 边框色 |
|------|------|------|--------|-----|--------|
| A | Periodic | 80 | 蓝色 | (0, 0, 200) | 黑色 |
| B | Fixed | 142 | 橙色 | (220, 120, 0) | 黑色 |
| C | Error-Driven | 18 | 绿色 | (0, 150, 0) | 黑色 |
| D | State-Driven | 24 | 红色 | (200, 0, 0) | 黑色 |
| E | Lyapunov | 89 | 紫色 | (140, 0, 140) | 黑色 |

**柱子样式**：

- 宽度：0.6（相对X轴刻度间隔）
- 边框宽度：1 pt
- 填充：实色填充
- 圆角：可选，2pt

**数值标注**：

| 方案 | 数值 | 位置 |
|------|------|------|
| A | 80 | 柱子上方 |
| B | 142 | 柱子上方 |
| C | 18 | 柱子上方 |
| D | 24 | 柱子上方 |
| E | 89 | 柱子上方 |

**Reduction标注**：

> ⚠️ **重要**：减少比例必须以 **B方案 (Fixed Threshold)** 作为基准计算： Reduction = (N_B - N_i) / N_B × 100%

| 方案 | 相对B减少 | 标注内容 |
|------|-----------|----------|
| A | - | - |
| B | baseline | - |
| C | 87.3% | "87.3%↓" |
| D | 83.1% | "83.1%↓" |
| E | 37.3% | "37.3%↓" |

**辅助元素**：

1. **X轴标签**
   - A: Periodic
   - B: Fixed
   - C: Error-Driven
   - D: State-Driven
   - E: Lyapunov-Driven
   - 字体：Times New Roman, 10pt

2. **Y轴**
   - 范围：[0, 160]
   - 刻度：0, 20, 40, 60, 80, 100, 120, 140
   - 标签："Communication Count"

3. **网格线**
   - 水平网格线，主要刻度处
   - 颜色：灰色，0.5 pt

4. **标题**
   - 位置：图上方居中
   - 内容："Communication Count Comparison"
   - 字体：Times New Roman, 11pt, 加粗

**ASCII示意图**：

```
Communication Count
160 ┤
    │
140 ┤           ██142
    │           ██
120 ┤           ██
    │           ██
100 ┤           ██
    │           ██
 80 ┤ ██80    ██          ██89
    │ ██       ██          ██
 60 ┤ ██       ██          ██
    │ ██       ██          ██
 40 ┤ ██       ██  ██24    ██
    │ ██       ██  ██       ██
 20 ┤ ██       ██  ██      ██
    │ ██       ██  ██       ██
  0 ┼──────────────────────────
      A     B    C    D    E
     ██   ████  ██  ████  ████
          142        24
```

**数据对比表（未做仿真，预估）**：

> ⚠️ **需从仿真获取的数据项**：
> - 各方案的通信次数 N_trigger
> - 通信率 = N_trigger / (总采样点数)
> - 稳态误差 ||δ||_steady
> - 相对B方案的减少比例 = (N_B - N_i) / N_B × 100%
> - 最小触发间隔 t_min

| 方案 | 通信次数 | 通信率 | 稳态误差(m) | 相对B减少 |
|------|---------|--------|--------------|-----------|
| A | 80 | 0.50% | 0.0109 | - |
| B | 142 | 0.89% | 0.0105 | baseline |
| C | 18 | 0.11% | 0.0049 | 87.3% |
| D | 24 | 0.15% | 0.0049 | 83.1% |
| E | 89 | 0.56% | 0.0049 | 37.3% |

**学术分析**：

1. **通信效率排名**（从高到低）：
   - C (Error-Driven): 18次，最节省
   - D (State-Driven): 24次
   - E (Lyapunov): 89次
   - A (Periodic): 80次
   - B (Fixed): 142次，最频繁

2. **核心贡献**：
   - C方案相比B节省87.3%通信
   - D方案节省83.1%
   - E方案节省37.3%

3. **精度vs通信权衡**：
   - C通信最少，但精度最高
   - E通信较多，但稳定性最强
   - 这符合论文的设计目标

4. **实际意义**：
   - 87.3% reduction意味着通信资源大幅节省
   - 在实际铁路系统中，可降低通信设备成本
   - 提高频谱利用率

**学术意义**：
- 论文核心贡献图
- 验证摘要中的"up to 87.3% reduction"
- 对应论文 Table V
- 证明自适应阈值方案的实际价值
- ⚠️ **数据一致性**：图中数据必须与论文摘要和结论中的数字完全一致。若仿真结果有出入，需同时更新论文文本和图表标注

---

## 仿真挑战与对策

本节详细说明学术仿真中可能遇到的5大核心挑战及对应解决策略。每种策略都包含**问题分析**、**解决思路**、**方法选择依据**和**权衡考量**。

---

### 挑战一：自适应参数估计的收敛性 (针对 Fig. 4b)

#### 问题分析

**预期现象**：参数估计误差 $||\hat{A} - A||$ 和 $||\hat{B} - B||$ 应单调下降，并在5秒左右收敛到 $10^{-3}$ 量级。

**根本原因**：
- **PE条件缺失**：自适应控制理论中，持续激励(PE)条件是参数收敛到真值的充分条件。PE要求输入信号覆盖足够多的频率成分，使得参数估计问题可辨识
- **一致性目标冲突**：系统目标是状态趋同 ($\delta_i \to 0$)，一旦达成稳态，自适应律 $\dot{\hat{A}}_i = \Lambda_i \delta_i \hat{x}_i^T H_i$ 中的 $\delta_i \to 0$ 导致更新停止
- **辨识 vs 控制矛盾**：控制器试图消除误差，但误差消失的同时也失去了参数辨识所需的"激励"

**可能出现的情况**：
1. 参数误差快速下降后卡在某个非零值（可能是局部最优）
2. 参数在一定范围内振荡，无法进一步收敛
3. 参数估计值发散或不稳定

#### 解决思路

**思路一：引入外部激励（保持辨识能力）**

选择依据：
- 当系统处于稳态时，需要人为注入信号以维持辨识能力
- 探测噪声的频率应高于系统带宽，确保不影响控制性能
- 适用于：需要精确参数估计的理论研究场景

实施步骤：
1. 分析系统自然振荡频率，确定噪声频率范围
2. 设计噪声幅值，确保信噪比合理（噪声能量 << 控制能量）
3. 确定注入时长（通常在瞬态阶段，稳态后移除）
4. 验证噪声注入不影响控制目标达成

**思路二：放宽收敛标准（接受有界性）**

选择依据：
- 论文Theorem 2仅要求参数有界，未要求收敛到真值
- 工程应用中，只要控制性能达标即可
- 适用于：工程应用导向的研究

实施步骤：
1. 明确控制性能指标（如误差收敛到某阈值）
2. 验证参数有界性（画图确认不发散）
3. 在论文中说明：参数估计是"足够好"而非"精确"
4. 调整Figure 4b的Y轴范围，聚焦于"有界"而非"趋于零"

**思路三：调整自适应增益（加快收敛）**

选择依据：
- 增益太小 → 收敛太慢
- 增益太大 → 振荡或发散
- 需要在收敛速度和稳定性之间平衡

实施步骤：
1. 先用小增益 (1e-6) 测试基线
2. 逐步增大增益数量级 (1e-5, 1e-4)
3. 观察参数误差曲线的斜率和振荡程度
4. 选择刚好不引起振荡的增益值

**思路四：分阶段分析（分解复杂性）**

选择依据：
- 瞬态阶段和稳态阶段的参数行为不同
- 混合在一起会导致曲线难以解释

实施步骤：
1. 将仿真数据按时间分段（t=0~2s为瞬态，t=2~10s为稳态）
2. 分别分析两阶段的参数行为
3. 在图中用垂直虚线标注阶段分界
4. 在文字分析中解释两阶段的不同机制

**思路五：修改自适应律结构（从根本上改进）**

选择依据：
- 标准自适应律依赖当前误差，可能在稳态失效
- 带积分项的自适应律可利用历史信息

实施步骤：
1. 思考：如何在 $\delta_i \to 0$ 时仍保持辨识？
2. 方案A：引入积分项累积误差历史
3. 方案B：使用变结构自适应（切换机制）
4. 方案C：采用批量最小二乘而非递推估计
5. 注意：修改自适应律需要重新分析稳定性

#### 权衡考量

| 方法 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| 探测噪声 | 理论上有望收敛到真值 | 可能影响控制性能 | 理论研究 |
| 放宽标准 | 简单，符合定理条件 | 牺牲参数精度 | 工程应用 |
| 调整增益 | 快速见效 | 可能不稳定 | 初步调试 |
| 分阶段分析 | 易于解释 | 不能解决收敛问题 | 论文写作 |
| 修改自适应律 | 根本性改进 | 需要重新证明稳定性 | 创新研究 |

---

### 挑战二：离散时间步长与Zeno行为的边界 (针对 Fig. 3)

#### 问题分析

**预期现象**：最小触发间隔 $\tau > 0$，触发点之间有明显间隙，验证Zeno-free。

**根本原因**：
- 理论证明在连续时间框架下进行，确保 $\tau > 0$ 避免Zeno
- 仿真使用离散时间步长 $dt = 0.005s$（每步5ms）
- 离散化可能破坏理论保证：若 $\tau_{theory} < dt$，仿真中会出现密集触发

**可能出现的情况**：
1. 触发间隔极小（< 10ms），每步都触发
2. 触发模式呈"簇状"（burst），而非均匀分布
3. 看起来像Zeno行为，但实际上由离散化导致

#### 解决思路

**思路一：明确最小间隔约束（工程保障）**

选择依据：
- 这是最直接的方法，确保工程上可实现
- 不改变理论分析，只在仿真中强制执行

实施步骤：
1. 确定合理的工程最小间隔（如10ms对应100Hz采样）
2. 在仿真中记录：如果触发时间与上次之差 < 最小间隔，则忽略
3. 在结果中报告"使用的最小间隔"而非"理论最小间隔"
4. 在论文中说明：Zeno-free证明是理论结果，仿真只是验证工程可行性

**思路二：调整触发条件敏感度（源头控制）**

选择依据：
- 触发条件过于敏感 → 频繁触发
- 调整 $\sigma$ 阈值可以控制触发频率

实施步骤：
1. 尝试不同的 $\sigma_{min}$ 值（0.05, 0.1, 0.2）
2. 观察触发次数和间隔的变化
3. 选择触发频率合理的参数组合
4. 在论文中报告选择的参数及理由

**思路三：分离理论与仿真（学术规范）**

选择依据：
- 理论证明和仿真是两个不同层面的验证
- 不应混淆两者的目的和局限性

实施步骤：
1. 在理论部分：引用Theorem 3，说明 $\tau > 0$ 的证明
2. 在仿真部分：报告实际观测到的最小间隔
3. 在讨论中：解释理论连续vs仿真离散的差异
4. 明确论文立场：仿真验证控制目标达成，理论证明Zeno-free

#### 权衡考量

| 方法 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| 最小间隔约束 | 简单可靠 | 可能降低控制精度 | 工程论文 |
| 调整敏感度 | 减少触发次数 | 需要参数调优 | 所有场景 |
| 分离理论与仿真 | 学术规范 | 增加写作工作量 | 理论导向论文 |

---

### 挑战三：对数坐标下的"零误差"处理 (针对 Fig. 2 & Fig. 4b)

#### 问题分析

**预期现象**：误差从大值平滑下降到 $10^{-3}$ 或 $10^{-4}$ 量级，在对数坐标下呈现为光滑曲线。

**根本原因**：
- 对数函数定义域要求正数：$\log(0) = -\infty$
- 计算机浮点精度有限：误差可能下溢到机器零
- 收敛到零 vs 收敛到极小值的区别

**可能出现的情况**：
1. 曲线尾部突然截断（数据被置零后无法绘图）
2. 曲线出现大幅波动（接近机器精度时数值不稳定）
3. 不同运行得到截然不同的尾部形态

#### 解决思路

**思路一：预加极小常数（工程常用）**

选择依据：
- 这是工程和科研中的标准做法
- 保持曲线连续性，不影响定性结论

实施步骤：
1. 选择常数 $\epsilon$（通常 $10^{-6}$ 到 $10^{-10}$）
2. 绘图时使用 $\log_{10}(||\delta|| + \epsilon)$
3. 在论文方法部分说明："为处理对数坐标，添加了极小常数"
4. 验证：若误差真的很大，$\epsilon$ 可忽略；若误差很小，$\epsilon$ 使其可显示

**思路二：数据截断（明确边界）**

选择依据：
- 明确数据的有效范围
- 避免误导（曲线降到机器精度并非真正收敛）

实施步骤：
1. 确定有意义的最小值（根据物理意义或测量精度）
2. 将小于该值的 data 统一设为该值
3. 在图中用断点符号标注截断位置
4. 在图注中说明截断处理

**思路三：分段绘图（分解复杂性）**

选择依据：
- 对数坐标适合展示跨多个数量级的变化
- 但当变化过大时，细节可能被淹没

实施步骤：
1. 分析数据的变化范围
2. 若跨超过6个数量级，考虑分图展示
3. 例如：主图展示 $10^2$ 到 $10^{-2}$，插图展示 $10^{-2}$ 到 $10^{-5}$
4. 确保各图之间数据连续

#### 权衡考量

| 方法 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| 预加常数 | 简单连续 | 稍微抬高底部 | 常规绘图 |
| 数据截断 | 明确边界 | 可能失真 | 精密测量 |
| 分段绘图 | 细节清晰 | 增加图数 | 变化范围大 |

---

### 挑战四：初始瞬态与轨迹的物理合理性 (针对 Fig. 1b)

#### 问题分析

**预期现象**：光滑、无超调的相轨迹，所有列车速度收敛到 $v^*=22.22m/s$，位置收敛到等间距。

**根本原因**：
- 初始条件：位置扰动 $\pm 100m$，速度扰动 $\pm 5m/s$
- 重载列车惯性大（$m = 5 \times 10^6 kg$），大初始偏差需要大控制力
- 控制饱和：实际系统有物理限制（牵引力、制动力）

**可能出现的情况**：
1. 初始阶段剧烈超调（位置或速度振荡）
2. 控制输出饱和，触发保护机制
3. 极端情况下位置次序颠倒（"虚拟碰撞"）

#### 解决思路

**思路一：加入控制饱和约束（模拟真实物理）**

选择依据：
- 真实列车有最大牵引力和制动力
- 饱和约束使仿真更真实，也更能暴露控制设计问题

实施步骤：
1. 确定物理极限：$F_{trac\_max}$ 和 $F_{brake\_max}$
2. 在控制计算后添加：`u = clip(u, -F_max, F_max)`
3. 观察饱和发生的时间和持续时长
4. 分析饱和对收敛性的影响（在论文中报告）

**思路二：约束初始条件（确保可行性）**

选择依据：
- 某些初始条件即使在无约束情况下也可能失败
- 筛选掉"病态"初始条件是合理的

实施步骤：
1. 定义可行性约束：如后车位置 < 前车位置
2. 生成初始条件时检查约束，不满足则重新生成
3. 记录并报告筛选比例
4. 在论文中说明初始条件的选择依据

**思路三：减小初始扰动（降低难度）**

选择依据：
- 初始扰动越大，收敛越困难
- 可以先在小扰动下验证控制有效性，再逐步增大

实施步骤：
1. 将位置扰动从 $\pm 100m$ 减小到 $\pm 50m$
2. 将速度扰动从 $\pm 5m/s$ 减小到 $\pm 2m/s$
3. 验证收敛性
4. 若需要，缓慢增大扰动并记录极限

**思路四：分阶段展示（分解复杂性）**

选择依据：
- 瞬态阶段和稳态阶段的关注点不同
- 混合展示可能模糊重点

实施步骤：
1. 确定分割时间点（如 t=2s 或 t=5s）
2. 主图展示完整曲线，插图放大初始阶段
3. 或分别绘制两个时间范围的图
4. 在图中标注稳态区域

#### 权衡考量

| 方法 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| 控制饱和 | 真实 | 可能影响收敛 | 工程论文 |
| 约束初始条件 | 避免失败 | 降低通用性 | 演示系统 |
| 减小扰动 | 容易收敛 | 难度降低 | 初步验证 |
| 分阶段展示 | 清晰 | 增加图数 | 论文写作 |

---

### 挑战五：核心指标的敏感性与复现难度 (针对 Fig. 5)

#### 问题分析

**预期现象**：精确标注 "87.3% reduction" 等数字，数值应与论文摘要/结论一致。

**根本原因**：
- 通信次数是离散计数，受随机因素影响
- 触发条件依赖状态误差，初始条件敏感
- 参数（$\sigma_{min}$, $k$, $c$等）的微小变化可能显著影响结果

**可能出现的情况**：
1. 仿真得到的 reduction 在 70%~90% 之间波动
2. Periodic 方案表现可能不如预期（通信间隔选择影响大）
3. 重复运行得到显著不同的触发次数

#### 解决思路

**思路一：固定随机种子（确保可复现）**

选择依据：
- 这是最基本的要求
- 允许审稿人复现结果

实施步骤：
1. 选择一个合理的随机种子（如 42, 123, 2024）
2. 在所有对比实验中保持相同种子
3. 在论文中明确报告使用的种子
4. 确保不同方案除控制参数外完全相同

**思路二：多次仿真取平均（统计稳健性）**

选择依据：
- 单次结果可能具有偶然性
- 多次平均更能反映本质规律

实施步骤：
1. 确定仿真次数（建议 3~5 次）
2. 每次使用不同随机种子
3. 计算均值和标准差
4. 在图中用误差棒表示不确定性

**思路三：参数敏感性分析（理解边界）**

选择依据：
- 了解参数影响边界有助于理解系统
- 显示结果不是"恰好如此"

实施步骤：
1. 选择关键参数（如 $\sigma_{min}$）
2. 设置参数范围（如 0.05, 0.1, 0.15, 0.2）
3. 对每个参数值运行仿真
4. 绘制参数 vs 触发次数的曲线

**思路四：报告实际范围而非精确值（学术诚信）**

选择依据：
- 追求精确匹配可能导致数据操纵
- 报告真实结果更符合学术规范

实施步骤：
1. 诚实报告仿真得到的实际数值
2. 说明数值可能波动的范围
3. 在论文中表述为"约87%"而非"87.3%"
4. 如果结果显著偏离预期，分析原因

**思路五：理论预测与仿真验证结合（双重验证）**

选择依据：
- 理论预测提供预期
- 仿真验证提供实证

实施步骤：
1. 基于触发条件公式，推导触发次数的理论估计
2. 将理论值与仿真值对比
3. 分析差异来源
4. 在论文中报告两者以展示一致性

#### 权衡考量

| 方法 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| 固定种子 | 可复现 | 可能恰好选择不利种子 | 常规要求 |
| 多次平均 | 稳健 | 增加计算量 | 重要结论 |
| 敏感性分析 | 全面 | 增加工作量 | 深入研究 |
| 报告范围 | 诚实 | 降低说服力 | 学术规范 |
| 理论+仿真 | 双重验证 | 需要理论推导 | 理论论文 |

---

### 综合建议

**面对仿真挑战的核心原则**：

1. **理解理论假设**：明确仿真在什么假设下进行，离散化带来了什么影响

2. **区分规范vs实现**：理论证明是规范，仿真是实现。两者可能有差距，诚实报告即可

3. **参数敏感性意识**：所有数值结果都可能在一定范围内波动，报告时保持合理精度

4. **数据处理透明**：对对数坐标处理、截断等操作在论文中说明，体现学术规范

5. **多次验证习惯**：重要结论至少用2-3组不同参数/种子验证，确保结论稳健

6. **图表服务论点**：每个图都应有明确的学术论点支持，挑战解决是为论点服务

**重要提醒**：仿真结果与理论预期有偏差是正常现象，关键是如实报告实验数据并进行合理分析。学术论文的价值在于提供 insights，而非追求完美的数值匹配。坦然面对仿真中的"不完美"，往往是展现学术成熟度的机会。

---

## 统一绘图规范

### 字体
- 标题：Times New Roman, 12pt
- 轴标签：Times New Roman, 10pt
- 图例：Times New Roman, 9pt
- 标注：Times New Roman, 8pt

### 颜色 (IEEE标准)
- 蓝色：RGB(0, 0, 127)
- 红色：RGB(227, 0, 34)
- 绿色：RGB(0, 110, 0)
- 橙色：RGB(227, 110, 0)
- 紫色：RGB(130, 0, 130)

### 线条
- 主曲线：1.5 pt
- 辅助线：1 pt
- 网格：0.5 pt

### 分辨率
- 输出格式：EPS或PDF
- 分辨率：300 DPI以上

### 边距
- 图形区域左右留白：10%
- 上下留白：5%
